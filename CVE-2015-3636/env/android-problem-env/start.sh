#!/bin/sh
	
qemu-system-aarch64\
    -cpu cortex-a57 \
    -machine type=ranchu \
    -m 1024 \
    -append 'console=ttyAMA0,38400 keep_bootcon earlyprintk=ttyAMA0' \
    -serial mon:stdio \
    -kernel ./Image \
    -initrd ./ramdisk.img \
    -drive index=0,id=sdcard,file=./system.img \
    -device virtio-blk-device,drive=sdcard \
    -drive index=1,id=userdata,file=./userdata.img \
    -device virtio-blk-device,drive=userdata \
    -drive index=2,id=cache,file=./cache.img \
    -device virtio-blk-device,drive=cache -drive index=3,id=system,file=./system.img \
    -device virtio-blk-device,drive=system \
    -netdev user,id=mynet \
    -device virtio-net-device,netdev=mynet \
    -show-cursor \
    -nographic -L lib/pc-bios \
    -gdb tcp::1234,ipv4 \